{% block body %}
    <!-- Modal toggle -->
    <a data-modal-target="default-modal" data-modal-toggle="default-modal" class="flex flex-col items-center ml-2 mr-2 p-2 bg-cuiGrayDark hover:bg-cuiBlack rounded-lg" type="button">
        <svg class="w-6 h-6 text-cuiOrange dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
            <path d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"/>
        </svg>
        <p id="note">{{ recipe.note_moyenne }}</p>
        <p class="text-cuiGrayLight mt-2">Notation</p>
    </a>

    <div id="default-modal" tabindex="-1" aria-hidden="true" class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
        <div class="relative p-4 w-full max-w-2xl max-h-full">
            <div class="relative bg-cuiBlack rounded-lg shadow dark:bg-gray-700">
                <div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t">
                    <p class="text-xl sm:text-4xl xl:text-6xl font-semibold text-white mr-3">
                        Notez la recette
                    </p>
                    <svg class="w-8 h-8 sm:w-12 sm:h-12 xl:w-16 xl:h-16 text-white dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm.524 5.61a.5.5 0 0 1 .4-.34l1.122-.164.5-1.016a.521.521 0 0 1 .9 0l.5 1.016 1.122.164a.5.5 0 0 1 .277.853l-.812.791.192 1.116a.5.5 0 0 1-.725.528l-1-.528-1 .528a.5.5 0 0 1-.725-.528l.192-1.116-.812-.791a.5.5 0 0 1-.131-.513Zm-6 0a.5.5 0 0 1 .4-.34l1.126-.164.5-1.016a.521.521 0 0 1 .9 0l.5 1.016 1.122.164a.5.5 0 0 1 .277.853l-.812.791.192 1.116A.5.5 0 0 1 8 9.058L7 8.53l-1 .528a.5.5 0 0 1-.725-.528l.192-1.116-.812-.791a.5.5 0 0 1-.131-.513ZM10 16c-3.047 0-5.5-2.735-5.5-5h1a11.7 11.7 0 0 0 4.5.583c2.614 0 4.308-.391 4.524-.673l.976.09c0 2.265-2.453 5-5.5 5Z"/>
                    </svg>
                    <button type="button" class="text-cuiBlack bg-cuiGrayLight hover:bg-cuiOrange rounded-lg text-sm w-8 h-8 sm:w-12 sm:h-12 xl:w-16 xl:h-16 ms-auto inline-flex justify-center items-center" data-modal-hide="default-modal">
                        <svg class="w-3 h-3 sm:w-5 sm:h-5 xl:w-7 xl:h-7" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                        </svg>
                        <span class="sr-only">Close modal</span>
                    </button>
                </div>
                <div id="note" class="flex justify-center p-4 md:p-5 space-y-4">
                    {% for i in 1..5 %}
                        {% if recipe.note_recette >= i %}
                            <a id="{{ i }}" onmouseenter="dynamicHover({{ i }})" onmouseleave="reset({{ recipe.note_recette }})" href="{{ path('app_details_note_update', {'fav': recipe.fav, 'idRecipe': recipe.id, 'note': i}) }}" class="mt-4">
                                <div>
                                    <svg class="w-12 h-12 sm:w-16 sm:h-16 xl:w-24 xl:h-24 text-cuiOrangeLight" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 21 20">
                                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m11.479 1.712 2.367 4.8a.532.532 0 0 0 .4.292l5.294.769a.534.534 0 0 1 .3.91l-3.83 3.735a.534.534 0 0 0-.154.473l.9 5.272a.535.535 0 0 1-.775.563l-4.734-2.49a.536.536 0 0 0-.5 0l-4.73 2.487a.534.534 0 0 1-.775-.563l.9-5.272a.534.534 0 0 0-.154-.473L2.158 8.48a.534.534 0 0 1 .3-.911l5.294-.77a.532.532 0 0 0 .4-.292l2.367-4.8a.534.534 0 0 1 .96.004Z"/>
                                    </svg>
                                </div>
                            </a>
                        {% else %}
                            <a id="{{ i }}" onmouseenter="dynamicHover({{ i }})" onmouseleave="reset({{ recipe.note_recette }})" href="{{ path('app_details_note_update', {'fav': recipe.fav, 'idRecipe': recipe.id, 'note': i}) }}" class="mt-4">
                                <div>
                                    <svg class="w-12 h-12 sm:w-16 sm:h-16 xl:w-24 xl:h-24 text-cuiOrangeLight" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 21 20">
                                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m11.479 1.712 2.367 4.8a.532.532 0 0 0 .4.292l5.294.769a.534.534 0 0 1 .3.91l-3.83 3.735a.534.534 0 0 0-.154.473l.9 5.272a.535.535 0 0 1-.775.563l-4.734-2.49a.536.536 0 0 0-.5 0l-4.73 2.487a.534.534 0 0 1-.775-.563l.9-5.272a.534.534 0 0 0-.154-.473L2.158 8.48a.534.534 0 0 1 .3-.911l5.294-.77a.532.532 0 0 0 .4-.292l2.367-4.8a.534.534 0 0 1 .96.004Z"/>
                                    </svg>
                                </div>
                            </a>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>

    <script>
        const stars = document.querySelectorAll('#note a');

        function dynamicHover(pos)
        {
            for (let i = 0; i < stars.length; i++) {
                if (i < pos) stars[i].querySelector('svg').setAttribute('fill', 'currentColor');
                else stars[i].querySelector('svg').setAttribute('fill', 'none');
            }
        }

        function reset(note)
        {
            for (let i = 0; i < stars.length; i++) {
                if (i < note) stars[i].querySelector('svg').setAttribute('fill', 'currentColor');
                else stars[i].querySelector('svg').setAttribute('fill', 'none');
            }
        }
    </script>
{% endblock %}
